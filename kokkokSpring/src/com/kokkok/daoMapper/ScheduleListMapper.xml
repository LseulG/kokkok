<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kokkok.schedule.dao.ScheduleListDao">	
    
    <select id="getScheduleListTotalCount" resultType="int">
    	select count(*) as scount
		from schedule a, board b, location c
		where a.seq = b.seq and b.seq = c.seq
    </select>
    
    <select id="getScheduleList" parameterType="java.util.Map" resultType="com.kokkok.dto.ScheduleListDto">
    	select b.*
		from (select rownum rn, a.*
		from (select sseq, b.seq, bcode, userid, subject, content, logtime, updatetime, recommcount, wishcount, hit,
		startdate, enddate, enddate - startdate + 1 as period, originpicture, savefolder, savepicture, persons, thema,
		location, x, y, address, simpleaddr
		from schedule a, board b, location c
		where a.seq = b.seq and b.seq = c.seq 
		order by sseq desc) a		
		where <![CDATA[ rownum <= #{endNum} ]]>) b
		where b.rn >= #{startNum}
    </select>

</mapper>
